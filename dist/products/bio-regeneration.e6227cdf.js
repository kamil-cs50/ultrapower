class t{constructor(){this.mainImage=document.querySelector(".main-image img"),this.thumbnails=document.querySelectorAll(".thumbnail"),this.currentIndex=0,this.isTransitioning=!1,this.mainImage&&this.thumbnails.length>0&&this.initGallery()}initGallery(){this.mainImage&&(this.mainImage.style.opacity="1",this.mainImage.style.transition="opacity 0.3s ease-in-out"),this.thumbnails.forEach((t,e)=>{t.addEventListener("click",i=>{if(i.preventDefault(),this.isTransitioning)return;let s=t.querySelector("img");s&&s.src!==this.mainImage.src&&this.switchImage(s.src,e)})}),this.thumbnails[0]&&this.thumbnails[0].classList.add("active"),document.addEventListener("keydown",t=>{"ArrowLeft"===t.key?this.previousImage():"ArrowRight"===t.key&&this.nextImage()}),this.setupTouchEvents()}switchImage(t,e){this.isTransitioning||e===this.currentIndex||(this.isTransitioning=!0,this.mainImage.style.opacity="0",setTimeout(()=>{this.mainImage.src=t,this.mainImage.classList.add("fade-in"),this.mainImage.style.opacity="1",this.thumbnails[this.currentIndex].classList.remove("active"),this.thumbnails[e].classList.add("active"),this.currentIndex=e,setTimeout(()=>{this.mainImage.classList.remove("fade-in"),this.isTransitioning=!1},300)},300))}previousImage(){if(this.isTransitioning)return;let t=(this.currentIndex-1+this.thumbnails.length)%this.thumbnails.length,e=this.thumbnails[t].querySelector("img");e&&this.switchImage(e.src,t)}nextImage(){if(this.isTransitioning)return;let t=(this.currentIndex+1)%this.thumbnails.length,e=this.thumbnails[t].querySelector("img");e&&this.switchImage(e.src,t)}setupTouchEvents(){let t=0,e=0;this.mainImage.addEventListener("touchstart",e=>{t=e.touches[0].clientX},{passive:!0}),this.mainImage.addEventListener("touchend",i=>{e=i.changedTouches[0].clientX;let s=t-e;Math.abs(s)>50&&(s>0?this.nextImage():this.previousImage())},{passive:!0})}}class e{constructor(){this.gallery=null,this.initialize()}initialize(){this.gallery=new t,this.setupQuantityControls(),this.setupAddToCart()}setupQuantityControls(){let t=document.querySelector(".quantity-controls");if(!t)return;let e=t.querySelector("input"),i=t.querySelector(".minus"),s=t.querySelector(".plus");i&&e&&i.addEventListener("click",()=>{let t=parseInt(e.value);t>1&&(e.value=t-1)}),s&&e&&s.addEventListener("click",()=>{let t=parseInt(e.value);t<99&&(e.value=t+1)}),e&&e.addEventListener("change",()=>{let t=parseInt(e.value);(isNaN(t)||t<1)&&(t=1),t>99&&(t=99),e.value=t})}setupAddToCart(){let t=document.querySelector(".add-to-cart");t&&t.addEventListener("click",()=>{let t=document.querySelector("[data-product-id]");if(!t)return;let e=parseInt(document.querySelector(".quantity-controls input")?.value||1),i={id:t.dataset.productId,name:document.querySelector(".product-header h1")?.textContent,price:document.querySelector(".price")?.textContent,image:document.querySelector(".main-image img")?.src,quantity:e};this.addToCart(i)})}addToCart(t){window.app&&window.app.cartManager?window.app.cartManager.addToCart(t)&&this.showNotification():console.error("CartManager not available")}showNotification(){let t=document.createElement("div");t.className="added-to-cart-notification glass",t.textContent="Dodano do koszyka",document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("show")}),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>t.remove(),300)},2e3)}}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".product-details")&&new e});
//# sourceMappingURL=bio-regeneration.e6227cdf.js.map
